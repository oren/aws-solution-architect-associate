"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const resource_policy_1 = require("./resource-policy");
var RemovalPolicy;
(function (RemovalPolicy) {
    /**
     * This is the default removal policy for most resources. It means that when the resource
     * is removed from the app, it will be physically destroyed.
     */
    RemovalPolicy[RemovalPolicy["Destroy"] = 0] = "Destroy";
    /**
     * This uses the 'Retain' DeletionPolicy, which will cause the resource to be retained
     * in the account, but orphaned from the stack.
     */
    RemovalPolicy[RemovalPolicy["Orphan"] = 1] = "Orphan";
    /**
     * This will apply the 'Retain' DeletionPolicy and also add metadata for the toolkit
     * to apply a CloudFormation stack policy which forbids the deletion of resource.
     */
    RemovalPolicy[RemovalPolicy["Forbid"] = 2] = "Forbid";
})(RemovalPolicy = exports.RemovalPolicy || (exports.RemovalPolicy = {}));
function applyRemovalPolicy(resource, removalPolicy) {
    if (removalPolicy === RemovalPolicy.Orphan || removalPolicy === RemovalPolicy.Forbid) {
        resource.options.deletionPolicy = resource_policy_1.DeletionPolicy.Retain;
    }
    // attach metadata that will tell the toolkit to protect this resource by
    // applying an appropriate stack update policy.
    if (removalPolicy === RemovalPolicy.Forbid) {
        resource.addMetadata('aws:cdk:protected', true);
    }
}
exports.applyRemovalPolicy = applyRemovalPolicy;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVtb3ZhbC1wb2xpY3kuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJyZW1vdmFsLXBvbGljeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLHVEQUFtRDtBQUVuRCxJQUFZLGFBa0JYO0FBbEJELFdBQVksYUFBYTtJQUN2Qjs7O09BR0c7SUFDSCx1REFBVyxDQUFBO0lBRVg7OztPQUdHO0lBQ0gscURBQU0sQ0FBQTtJQUVOOzs7T0FHRztJQUNILHFEQUFNLENBQUE7QUFDUixDQUFDLEVBbEJXLGFBQWEsR0FBYixxQkFBYSxLQUFiLHFCQUFhLFFBa0J4QjtBQUVELFNBQWdCLGtCQUFrQixDQUFDLFFBQWtCLEVBQUUsYUFBd0M7SUFDN0YsSUFBSSxhQUFhLEtBQUssYUFBYSxDQUFDLE1BQU0sSUFBSSxhQUFhLEtBQUssYUFBYSxDQUFDLE1BQU0sRUFBRTtRQUNwRixRQUFRLENBQUMsT0FBTyxDQUFDLGNBQWMsR0FBRyxnQ0FBYyxDQUFDLE1BQU0sQ0FBQztLQUN6RDtJQUVELHlFQUF5RTtJQUN6RSwrQ0FBK0M7SUFDL0MsSUFBSSxhQUFhLEtBQUssYUFBYSxDQUFDLE1BQU0sRUFBRTtRQUMxQyxRQUFRLENBQUMsV0FBVyxDQUFDLG1CQUFtQixFQUFFLElBQUksQ0FBQyxDQUFDO0tBQ2pEO0FBQ0gsQ0FBQztBQVZELGdEQVVDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVzb3VyY2UgfSBmcm9tICcuL3Jlc291cmNlJztcbmltcG9ydCB7IERlbGV0aW9uUG9saWN5IH0gZnJvbSAnLi9yZXNvdXJjZS1wb2xpY3knO1xuXG5leHBvcnQgZW51bSBSZW1vdmFsUG9saWN5IHtcbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIGRlZmF1bHQgcmVtb3ZhbCBwb2xpY3kgZm9yIG1vc3QgcmVzb3VyY2VzLiBJdCBtZWFucyB0aGF0IHdoZW4gdGhlIHJlc291cmNlXG4gICAqIGlzIHJlbW92ZWQgZnJvbSB0aGUgYXBwLCBpdCB3aWxsIGJlIHBoeXNpY2FsbHkgZGVzdHJveWVkLlxuICAgKi9cbiAgRGVzdHJveSA9IDAsXG5cbiAgLyoqXG4gICAqIFRoaXMgdXNlcyB0aGUgJ1JldGFpbicgRGVsZXRpb25Qb2xpY3ksIHdoaWNoIHdpbGwgY2F1c2UgdGhlIHJlc291cmNlIHRvIGJlIHJldGFpbmVkXG4gICAqIGluIHRoZSBhY2NvdW50LCBidXQgb3JwaGFuZWQgZnJvbSB0aGUgc3RhY2suXG4gICAqL1xuICBPcnBoYW4sXG5cbiAgLyoqXG4gICAqIFRoaXMgd2lsbCBhcHBseSB0aGUgJ1JldGFpbicgRGVsZXRpb25Qb2xpY3kgYW5kIGFsc28gYWRkIG1ldGFkYXRhIGZvciB0aGUgdG9vbGtpdFxuICAgKiB0byBhcHBseSBhIENsb3VkRm9ybWF0aW9uIHN0YWNrIHBvbGljeSB3aGljaCBmb3JiaWRzIHRoZSBkZWxldGlvbiBvZiByZXNvdXJjZS5cbiAgICovXG4gIEZvcmJpZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlSZW1vdmFsUG9saWN5KHJlc291cmNlOiBSZXNvdXJjZSwgcmVtb3ZhbFBvbGljeTogUmVtb3ZhbFBvbGljeSB8IHVuZGVmaW5lZCkge1xuICBpZiAocmVtb3ZhbFBvbGljeSA9PT0gUmVtb3ZhbFBvbGljeS5PcnBoYW4gfHwgcmVtb3ZhbFBvbGljeSA9PT0gUmVtb3ZhbFBvbGljeS5Gb3JiaWQpIHtcbiAgICByZXNvdXJjZS5vcHRpb25zLmRlbGV0aW9uUG9saWN5ID0gRGVsZXRpb25Qb2xpY3kuUmV0YWluO1xuICB9XG5cbiAgLy8gYXR0YWNoIG1ldGFkYXRhIHRoYXQgd2lsbCB0ZWxsIHRoZSB0b29sa2l0IHRvIHByb3RlY3QgdGhpcyByZXNvdXJjZSBieVxuICAvLyBhcHBseWluZyBhbiBhcHByb3ByaWF0ZSBzdGFjayB1cGRhdGUgcG9saWN5LlxuICBpZiAocmVtb3ZhbFBvbGljeSA9PT0gUmVtb3ZhbFBvbGljeS5Gb3JiaWQpIHtcbiAgICByZXNvdXJjZS5hZGRNZXRhZGF0YSgnYXdzOmNkazpwcm90ZWN0ZWQnLCB0cnVlKTtcbiAgfVxufVxuIl19